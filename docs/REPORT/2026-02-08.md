# 일일 개발 보고서 - 2026-02-08

## 오늘의 Git 활동

### 커밋 목록
- (미커밋) 교인 사진 일괄 업로드 기능 구현
- (미커밋) 보고서 관리자 삭제 기능 추가

### 변경 통계
- 7 files changed (신규 2, 수정 5)

## 변경된 파일

| 파일 | 상태 | 설명 |
|------|------|------|
| `src/components/members/BulkPhotoUpload.tsx` | A | 부서별 사진 일괄 업로드 컴포넌트 (파일명 자동 매칭 + 수동 선택) |
| `src/app/(dashboard)/members/bulk-photos/page.tsx` | A | 일괄 업로드 페이지 (권한 체크 포함) |
| `src/app/(dashboard)/members/page.tsx` | M | "사진 일괄" 버튼 추가 |
| `src/app/(dashboard)/reports/[id]/page.tsx` | M | canDelete 권한 체크 추가 (관리자만) |
| `src/components/reports/ReportDetail.tsx` | M | 관리자 보고서 삭제 기능 (모달 + 외래키 순서 삭제) |

## 완료한 작업

1. **교인 사진 일괄 업로드 기능**
   - 관련 파일: `src/components/members/BulkPhotoUpload.tsx`, `src/app/(dashboard)/members/bulk-photos/page.tsx`
   - 부서 선택 → 여러 사진 업로드 → 파일명으로 교인 이름 자동 매칭
   - 매칭 안 된 건 드롭다운으로 수동 선택
   - 기존 사진 덮어쓰기 경고, 업로드 진행률 표시
   - 관리자/팀장 권한 체크

2. **보고서 관리자 삭제 기능**
   - 관련 파일: `src/components/reports/ReportDetail.tsx`, `src/app/(dashboard)/reports/[id]/page.tsx`
   - canAccessAllDepartments 권한 체크
   - 삭제 확인 모달
   - 외래키 순서 맞춰 관련 테이블 삭제 (report_programs → newcomers → approval_history → weekly_reports)

## 업데이트된 문서

| 문서 | 변경 내용 |
|------|-----------|
| `docs/status/02-features.md` | 5.2 교인 사진 일괄 업로드 섹션 추가, 보고서 삭제 기능 추가 |
| `docs/status/05-components.md` | BulkPhotoUpload 컴포넌트 추가, ReportDetail 삭제 기능 반영 |

## 관련 GitHub 이슈

(GitHub CLI 미설치로 확인 불가)

## 내일 할 일 (자동 제안)

- [ ] 오늘 변경사항 커밋 및 Vercel 배포
- [ ] 일괄 업로드 실제 교인 데이터로 테스트
- [ ] Lighthouse 재측정 및 성능 확인
- [ ] 웹 푸시 알림 (Phase 2) - Service Worker, 백그라운드 알림

## 메모

- `BulkPhotoUpload` 컴포넌트는 TanStack Query 훅(`useDepartments`, `useMembers`)을 재활용하여 구현
- 파일명 자동 매칭은 확장자 제거 + 뒤쪽 숫자/언더스코어 제거 로직 적용 (예: `홍길동_1.jpg` → `홍길동`)
- 보고서 삭제 시 외래키 제약 순서를 지켜야 함 (report_programs, newcomers, approval_history 먼저 삭제)
